app-id: org.geany.Geany
runtime: org.freedesktop.Sdk
runtime-version: '23.08'
sdk: org.freedesktop.Sdk

command: geany
rename-icon: geany
copy-icon: true
rename-desktop-file: geany.desktop

finish-args:
  - --share=ipc
  - --socket=fallback-x11
  - --socket=wayland
  - --share=network
  - --filesystem=host
  - --filesystem=xdg-run/geany:create

modules:
  - shared-modules/intltool/intltool-0.51.json
  - name: vte
    buildsystem: meson
    config-opts:
      - -Ddocs=false
      - -Dvapi=false
      - -Dgir=false
    sources:
      - type: git
        url: https://gitlab.gnome.org/GNOME/vte.git
        tag: 0.72.4
        commit: 45d815431c08ff5a3cf076cde5edd43054773c4a
        x-checker-data:
          type: git
          tag-pattern: ^([\d.]+)$
          versions:
            <: '0.73'
  - name: geany
    config-opts:
      - --disable-api-docs
      - --disable-html-docs
    sources:
      - type: git
        url: https://github.com/techee/geany.git
        commit: 4b1be9a5776d1ca125a2b70177b618acee9b9db5
      - type: file
        path: org.geany.Geany.appdata.xml
    post-install:
      - install -Dm644 -t /app/share/metainfo org.geany.Geany.appdata.xml

# If you want to build Geany without plugins, just remove the line below.
  - geany-plugins.yml
